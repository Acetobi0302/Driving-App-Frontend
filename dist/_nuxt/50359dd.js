(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{516:function(e,t,r){var content=r(524);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(72).default)("65ca6074",content,!0,{sourceMap:!1})},523:function(e,t,r){"use strict";r(516)},524:function(e,t,r){var o=r(71)(!1);o.push([e.i,".selection{height:calc(1.5em + 1.25rem + 2px)}.ui.dropdown,.ui.dropdown input{line-height:1.3rem!important}.ui.selection.dropdown>.dropdown.icon{top:.8rem!important}.trito{box-shadow:0 1px 3px rgb(87 87 99/40%),0 1px 0 rgb(0 0 0/2%)!important;border:0!important;color:#8898aa!important;font-size:.875rem!important;font-weight:400!important;border-radius:.375rem!important}",""]),e.exports=o},525:function(e,t,r){"use strict";r.r(t);var o=r(20),n=(r(75),r(180),r(27),r(76),r(58),r(31),{components:{ModelSelect:r(520).ModelSelect},props:{event:{type:Object,default:null},isEdit:{type:Boolean,default:!0},revert:{type:Function,default:null},franchiseId:{type:Number,default:null},isDeleted:{type:Boolean,default:!1},driverId:{type:Number,default:null}},data:function(){return{course:null,minis:30,calBusy:!1,loading:!1,classes_id:null,start:null,art:null,end:null,hours:Array.from({length:19}).map((function(e,i){return i+5})),form:{id:null,art:null,student_id:null,franchise_id:null,car_id:null,date:null,start:null,end:null,private:0,note:null,paid:!1,driver_id:null,course_id:null}}},computed:{drivers:function(){return this.$store.state.drivers},privates:function(){return this.$store.state.privates},franchises:function(){return this.$store.state.franchiselist}},mounted:function(){this.$nextTick((function(){this.form.driver_id=this.driverId,this.form.franchise_id=this.franchiseId,this.form.date=this.event.startStr.slice(0,10),this.start=this.event.startStr.slice(11,16),this.end=this.event.endStr.slice(11,16),this.isEdit&&(this.calBusy=!0,this.form.private=this.event.extendedProps.private,this.form.id=this.event.id,this.calBusy=!1)}))},methods:{hideModal:function(){var e=this;this.$nextTick((function(){e.$refs.addBooking.hide()}))},onhide:function(){},bookSlot:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loading=!0,e.form.start=e.form.date+" "+e.start+":00",e.form.end=e.form.date+" "+e.end+":00",!e.isEdit){t.next=9;break}return t.next=6,e.$store.dispatch("updateBreak",e.form);case 6:r=t.sent,t.next=12;break;case 9:return t.next=11,e.$store.dispatch("bookBreak",e.form);case 11:r=t.sent;case 12:r&&(e.loading=!1,e.$emit("exit"),e.$emit("refresh")),e.loading=!1;case 14:case"end":return t.stop()}}),t)})))()}}}),l=(r(523),r(30)),component=Object(l.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var o=t.invalid;return[r("b-overlay",{staticClass:"position-clock",attrs:{variant:"white",opacity:.3,blur:"1rem",rounded:"sm",show:e.calBusy}},[r("b-form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.bookSlot.apply(null,arguments)}}},[r("b-row",[r("b-col",[r("b-form-group",{staticClass:"form-control-label",attrs:{label:e.$tc("Franchise")}},[r("b-form-select",{staticClass:"form-control-alternative",attrs:{name:e.$tc("Franchise"),rules:"required",options:e.franchises,required:"",disabled:""},model:{value:e.form.franchise_id,callback:function(t){e.$set(e.form,"franchise_id",t)},expression:"form.franchise_id"}})],1)],1),e._v(" "),r("b-col",[r("b-form-group",{staticClass:"form-control-label",attrs:{label:e.$tc("Driver")}},[r("b-form-select",{staticClass:"form-control-alternative",attrs:{name:e.$tc("Driver"),options:e.drivers,disabled:""},model:{value:e.form.driver_id,callback:function(t){e.$set(e.form,"driver_id",t)},expression:"form.driver_id"}})],1)],1)],1),e._v(" "),r("b-row",[r("b-col",[r("b-form-group",{staticClass:"form-control-label",attrs:{label:e.$tc("Private")}},[r("b-form-select",{staticClass:"form-control-alternative",attrs:{name:e.$tc("Private"),rules:"required",options:e.privates,required:""},model:{value:e.form.private,callback:function(t){e.$set(e.form,"private",t)},expression:"form.private"}})],1)],1),e._v(" "),r("b-col",[r("ValidationProvider",{attrs:{name:e.$tc("Date"),rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[r("label",{staticClass:"form-control-label"},[e._v(e._s(e.$tc("Date")))]),e._v(" "),r("date-picker",{staticClass:"input-group input-group-alternative",attrs:{locale:"de",clearable:!1,editable:!1,disabled:!e.isEdit,required:!0,placeholder:"Select date","value-type":"format"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}}),e._v(" "),r("span",{staticClass:"invalid-feedback",staticStyle:{display:"block"},attrs:{id:"error"}},[e._v(e._s(o[0]))]),e._v(" "),r("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"model",rawName:"v-model",value:e.form.date,expression:"form.date"}],attrs:{type:"text"},domProps:{value:e.form.date},on:{input:function(t){t.target.composing||e.$set(e.form,"date",t.target.value)}}})]}}],null,!0)})],1)],1),e._v(" "),r("b-row",{staticClass:"pb-3"},[r("b-col",[r("ValidationProvider",{attrs:{name:"Start Time",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[r("label",{staticClass:"form-control-label"},[e._v(e._s(e.$tc("StartTime")))]),e._v(" "),r("date-picker",{staticClass:"input-group input-group-alternative",attrs:{locale:"de","hour-options":e.hours,format:"HH:mm","value-type":"format",type:"time",placeholder:"HH:mm",clearable:!1,editable:!1,required:!0},on:{change:e.getTimeChange},model:{value:e.start,callback:function(t){e.start=t},expression:"start"}}),e._v(" "),r("span",{staticClass:"invalid-feedback",staticStyle:{display:"block"},attrs:{id:"error"}},[e._v(e._s(o[0]))]),e._v(" "),r("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"model",rawName:"v-model",value:e.start,expression:"start"}],attrs:{type:"text"},domProps:{value:e.start},on:{input:function(t){t.target.composing||(e.start=t.target.value)}}})]}}],null,!0)})],1),e._v(" "),r("b-col",[r("ValidationProvider",{attrs:{name:"End Time",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[r("label",{staticClass:"form-control-label"},[e._v(e._s(e.$tc("EndTime")))]),e._v(" "),r("date-picker",{staticClass:"input-group input-group-alternative",attrs:{locale:"de",clearable:!1,editable:!1,required:!0,"hour-options":e.hours,format:"HH:mm","value-type":"format",type:"time",placeholder:"HH:mm"},model:{value:e.end,callback:function(t){e.end=t},expression:"end"}}),e._v(" "),r("span",{staticClass:"invalid-feedback",staticStyle:{display:"block"},attrs:{id:"error"}},[e._v(e._s(o[0]))]),e._v(" "),r("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"model",rawName:"v-model",value:e.end,expression:"end"}],attrs:{type:"text"},domProps:{value:e.end},on:{input:function(t){t.target.composing||(e.end=t.target.value)}}})]}}],null,!0)})],1)],1),e._v(" "),r("div",{staticClass:"modal-footer"},[e.isDeleted?e._e():r("b-button",{attrs:{type:"submit",disabled:o||e.loading,variant:"primary"}},[e.loading?r("b-spinner",{staticClass:"mx-2",attrs:{small:""}}):e._e(),e.loading?e._e():r("span",[e._v(e._s(e.isEdit?e.$tc("save"):e.$tc("submit")))])],1)],1)],1)],1)]}}])})}),[],!1,null,null,null);t.default=component.exports}}]);