(window.webpackJsonp=window.webpackJsonp||[]).push([[2,34,36,38,41,42],{515:function(e,t,r){"use strict";r.r(t);var n={props:{alertText:{type:String,default:"sure you want to delete.!"},executeDelelte:{type:Function}},methods:{hideModal:function(){var e=this;this.$nextTick((function(){e.$refs.deleteModel.hide()}))},conform:function(){this.hideModal(),this.executeDelelte()}}},o=r(30),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-modal",{ref:"deleteModel",staticClass:"modal fade",attrs:{id:"deleteModel",size:"sm","modal-class":["modal-mini","modal-danger"],tabindex:"-1",role:"dialog",centered:"","content-class":["bg-gradient-danger"]},scopedSlots:e._u([{key:"modal-title",fn:function(){return[r("h3",[e._v(e._s(e.$tc("Pleaseconfirm")))])]},proxy:!0},{key:"modal-footer",fn:function(){return[r("b-button",{staticClass:"ml-4",attrs:{variant:"secondary"},on:{click:e.conform}},[e._v("\n      "+e._s(e.$tc("Yes")))]),e._v(" "),r("b-button",{staticClass:"ml-auto mr-4",attrs:{variant:"secondary"},on:{click:e.hideModal}},[e._v(e._s(e.$tc("No")))])]},proxy:!0}])},[e._v(" "),r("div",{staticClass:"py-3 text-center"},[r("i",{staticClass:"fas fa-bell fa-3x"}),e._v(" "),r("h4",{staticClass:"heading mt-4"},[e._v(e._s(e.$tc("Pleaseconfirm")))]),e._v(" "),r("p",[e._v(e._s(e.alertText))])])])}),[],!1,null,null,null);t.default=component.exports},522:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));r(13),r(12),r(9),r(14),r(10),r(15);var n=r(3),o=(r(27),r(35),r(517));r(518);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var d={methods:{jsPDFInvoiceTemplate:function(e){var t,r,n,l,d,f,m,v,h,_,y,x,param={body:e.body,columns:e.columns,fileName:e.fileName||"file",orientationLandscape:e.orientationLandscape||!1,business:{address:(null===(t=e.business)||void 0===t?void 0:t.address)||"Filiale 1 - Schwedenstraße 18 , 13357 Berlin",phone:(null===(r=e.business)||void 0===r?void 0:r.phone)||"Filiale 2 - Scharnweberstraße 60, 13405 Berlin",email:(null===(n=e.business)||void 0===n?void 0:n.email)||"Filiale 3 - Scharnweberstraße 25, 13405 Berlin",website:(null===(l=e.business)||void 0===l?void 0:l.website)||" "},contact:{label:(null===(d=e.contact)||void 0===d?void 0:d.label)||""},invoice:{label:(null===(f=e.invoice)||void 0===f?void 0:f.label)||"",invDate:(null===(m=e.invoice)||void 0===m?void 0:m.invDate)||"",invTotal:(null===(v=e.invoice)||void 0===v?void 0:v.invTotal)||"",invDescLabel:(null===(h=e.invoice)||void 0===h?void 0:h.invDescLabel)||"Bürozeiten",invDesc:(null===(_=e.invoice)||void 0===_?void 0:_.invDesc)||"Montag - Freitag: 09.00 - 19.00 Uhr + Samstags: 10.00 - 15.00 Uhr Absage von Fahrstunden NUR persönlich oder telefonisch! Eingeplante Fahrstunden, die NICHT eingehalten werden können, müssen 2 WERKTAGE (Samstage zählen hierbei NICHT zu den Werktagen) vorher abgesagt werden.",row1:(null===(y=e.invoice)||void 0===y?void 0:y.row1)||"",row2:(null===(x=e.invoice)||void 0===x?void 0:x.row2)||""},pageEnable:e.pageEnable||!0,pageLabel:e.pageLabel||"Page"},k={orientation:param.orientationLandscape?"landscape":""},$=new o.default(k),C=new Image;C.src="logo.png";var w=$.internal.pageSize.width,S="#000000",P="#4d4e53",D=20,B=12,N=10,T=6,O=4,j="{total_pages_count_string}",E=0,F=param.body.map((function(e){return c(c({},e),{},{count:++E})}));$.autoTable({margin:{top:55},body:F,headStyles:{fillColor:[41,128,186]},columns:param.columns,theme:"grid",didDrawPage:function(data){var e=15;$.addImage(C,16,9,50,18),param.business.name&&($.setFontSize(D),$.setTextColor(S),$.text(w-10,e,param.business.name,"right"),e+=O,e+=O),$.setFontSize(N-1),$.setTextColor(P),$.text(w-10,e,param.business.address,"right"),e+=O,$.text(w-10,e,param.business.phone,"right"),$.setFontSize(N),e+=O,$.text(w-10,e,param.business.email,"right"),e+=O,$.text(w-10,e,param.business.website,"right"),e+=O,e+=O,$.line(10,e,w-10,e),e+=T,e+=T,$.setTextColor(P),$.setFontSize(N),$.text(10,e,param.contact.label),$.setTextColor(P),$.setFontSize(N),$.text(w-10,e,param.invoice.invDate,"right"),e+=O;var t="Page "+$.internal.getNumberOfPages();"function"==typeof $.putTotalPages&&(t=t+" of "+j),$.setFontSize(10);var r=$.internal.pageSize,n=r.height?r.height:r.getHeight();$.text(t,data.settings.margin.left,n-10);var o=(new Date).toLocaleString();$.text(w-14,n-10,o,"right")}});var R=$.lastAutoTable.finalY+10;param.invoice.invTotal&&($.setFontSize(11),$.text(w-14,R,param.invoice.invTotal,"right")),param.invoice.row1&&(R+=T,$.text(w-14,R,param.invoice.row1,"right")),param.invoice.row2&&(R+=T,$.text(w-14,R,param.invoice.row2,"right")),$.setTextColor(S),R+=O,R+=O,$.setFontSize(B);!function(){R+=O,R+=O,$.setFontSize(B),$.setTextColor(S),$.text(param.invoice.invDescLabel,10,R),R+=O,R+=O,$.setTextColor(P),$.setFontSize(N-1);var e=$.splitTextToSize(param.invoice.invDesc,w-23,{});$.text(e,10,R)}(),"function"==typeof $.putTotalPages&&$.putTotalPages(j),$.save(e.fileName+".pdf")}}}},528:function(e,t,r){var content=r(553);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(72).default)("d3602f1c",content,!0,{sourceMap:!1})},529:function(e,t,r){var content=r(555);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(72).default)("2ca02e76",content,!0,{sourceMap:!1})},530:function(e,t,r){var content=r(557);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(72).default)("1ef8da08",content,!0,{sourceMap:!1})},531:function(e,t,r){var content=r(559);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(72).default)("63fa0f08",content,!0,{sourceMap:!1})},552:function(e,t,r){"use strict";r(528)},553:function(e,t,r){var n=r(71)(!1);n.push([e.i,".selection{height:calc(1.5em + 1.25rem + 2px)}.ui.dropdown,.ui.dropdown input{line-height:1.3rem!important}.ui.selection.dropdown>.dropdown.icon{top:.8rem!important}.trito{display:inline-block!important;box-shadow:0 1px 3px rgb(87 87 99/40%),0 1px 0 rgb(0 0 0/2%)!important;border:0!important;color:#8898aa!important;font-size:.875rem!important;font-weight:400!important;border-radius:.375rem!important}",""]),e.exports=n},554:function(e,t,r){"use strict";r(529)},555:function(e,t,r){var n=r(71)(!1);n.push([e.i,".borderbottom[data-v-92ea7816]{border-bottom:4px solid #e9ecef!important}.fa-r17x[data-v-92ea7816]{font-size:1.5em}.off[data-v-92ea7816]{left:65%}",""]),e.exports=n},556:function(e,t,r){"use strict";r(530)},557:function(e,t,r){var n=r(71)(!1);n.push([e.i,".borderbottom{border-bottom:4px solid #e9ecef!important}",""]),e.exports=n},558:function(e,t,r){"use strict";r(531)},559:function(e,t,r){var n=r(71)(!1);n.push([e.i,".borderbottom{border-bottom:4px solid #e9ecef!important}",""]),e.exports=n},574:function(e,t,r){var content=r(598);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(72).default)("0277e640",content,!0,{sourceMap:!1})},586:function(e,t,r){"use strict";r.r(t);var n=r(20),o=(r(75),r(31),{props:{event:{type:Object,default:null},isEdit:{type:Boolean,default:!0}},data:function(){return{currentPage:1,perPage:10,filter:null,franchise_id:null,isBusy:!1,fields:[{key:"#"},{key:"users.name",label:this.$tc("UserName"),sortable:!0},{key:"change_date",sortable:!0,label:this.$tc("ChangeDate"),formatter:function(e,t,r){return e.slice(0,10)+" ~ "+e.slice(10,16)}},{key:"date",label:this.$tc("Date"),sortable:!0},{key:"type",label:this.$tc("Action"),sortable:!0},{key:"start",sortable:!0,label:this.$tc("StartTime"),formatter:function(e,t,r){return e?e.slice(10,16):e}},{key:"end",sortable:!0,label:this.$tc("EndTime"),formatter:function(e,t,r){return e?e.slice(10,16):e}},{key:"amount",label:this.$tc("Amount"),sortable:!0}]}},computed:{items:function(){return this.$store.state.logs},totalRows:function(){return this.items.length}},mounted:function(){this.$nextTick(Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isEdit){e.next=3;break}return e.next=3,this.$store.dispatch("getLogs",this.event.id);case 3:case"end":return e.stop()}}),e,this)}))))}}),l=(r(558),r(30)),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-table",{attrs:{items:e.items,fields:e.fields,"current-page":e.currentPage,"per-page":e.perPage,hover:!0,busy:e.isBusy,"show-empty":"",stacked:"md",striped:"","tbody-tr-class":"rowclass","no-border-collapse":!0,"head-variant":"light",small:"",responsive:""},scopedSlots:e._u([{key:"table-busy",fn:function(){return[r("div",{staticClass:"text-center text-danger my-2"},[r("b-spinner",{staticClass:"align-middle"}),e._v(" "),r("strong",[e._v("Loading...")])],1)]},proxy:!0},{key:"cell(#)",fn:function(t){return[r("div",{staticClass:"td-action",staticStyle:{display:"flex"}},[e._v("\n        "+e._s(t.index+1+e.perPage*(e.currentPage-1))+"\n      ")])]}}])}),e._v(" "),r("b-card-footer",{staticClass:"pt-3 pb-1 d-flex justify-content-end"},[r("b-pagination",{attrs:{"total-rows":e.totalRows,"per-page":e.perPage,"last-number":"","first-number":""},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)}),[],!1,null,null,null);t.default=component.exports},587:function(e,t,r){"use strict";r.r(t);var n=r(20),o=(r(75),r(31),{props:{event:{type:Object,default:null},isEdit:{type:Boolean,default:!0}},data:function(){return{student_id:null,currentPage:1,perPage:10,filter:null,franchise_id:null,isBusy:!1,fields:[{key:"#"},{key:"users.name",label:this.$tc("UserName"),sortable:!0},{key:"note",label:this.$tc("Note"),sortable:!0},{key:"created_at",label:this.$tc("Date"),sortable:!0,formatter:function(e){return e.slice(0,10)}},{key:"action",label:this.$tc("action"),sortable:!1,tdClass:"text-center",thClass:"text-center"}]}},computed:{items:function(){return this.$store.state.notes},totalRows:function(){return this.items.length}},mounted:function(){this.$nextTick(Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isEdit){e.next=4;break}return this.booking_id=this.event.id,e.next=4,this.$store.dispatch("getNotes",this.booking_id);case 4:case"end":return e.stop()}}),e,this)}))))},methods:{deletenote:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.isBusy=!0,console.log(e),r.next=4,t.$store.dispatch("deleteNote",e);case 4:if(!r.sent){r.next=9;break}return t.booking_id=t.event.id,r.next=9,t.$store.dispatch("getNotes",t.booking_id);case 9:t.isBusy=!1;case 10:case"end":return r.stop()}}),r)})))()}}}),l=(r(556),r(30)),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-table",{attrs:{items:e.items,fields:e.fields,"current-page":e.currentPage,"per-page":e.perPage,hover:!0,busy:e.isBusy,"show-empty":"",stacked:"md",striped:"","tbody-tr-class":"rowclass","no-border-collapse":!0,"head-variant":"light",small:"",responsive:""},scopedSlots:e._u([{key:"table-busy",fn:function(){return[r("div",{staticClass:"text-center text-danger my-2"},[r("b-spinner",{staticClass:"align-middle"}),e._v(" "),r("strong",[e._v("Loading...")])],1)]},proxy:!0},{key:"cell(#)",fn:function(t){return[r("div",{staticClass:"td-action",staticStyle:{display:"flex"}},[e._v("\n        "+e._s(t.index+1+e.perPage*(e.currentPage-1))+"\n      ")])]}},{key:"cell(course_fees)",fn:function(t){return[r("b-badge",{staticStyle:{"font-size":"100%"},attrs:{pill:"",variant:t.item.paid?"success":"danger"}},[e._v(e._s(t.item.course_fees))])]}},{key:"cell(action)",fn:function(t){return[r("div",{staticClass:"td-action"},[r("b-button",{staticClass:"p-2 border-0 rounded-circle",attrs:{variant:"outline-danger"},on:{click:function(r){return e.deletenote(t.item.id)}}},[r("i",{staticClass:"fas fa-trash-alt fa-r17x"})])],1)]}}])}),e._v(" "),r("b-card-footer",{staticClass:"pt-3 pb-1 d-flex justify-content-end"},[r("b-pagination",{attrs:{"total-rows":e.totalRows,"per-page":e.perPage,"last-number":"","first-number":""},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)}),[],!1,null,null,null);t.default=component.exports},591:function(e,t,r){"use strict";r.r(t);var n=r(20),o=(r(75),r(9),r(25),r(41),r(518),{mixins:[r(522).a],props:{event:{type:Object,default:null},isEdit:{type:Boolean,default:!0}},data:function(){return{student_id:null,currentPage:1,perPage:10,filter:null,alldata:!0,franchise_id:null,isBusy:!1,fields:[{key:"#"},{key:"date",label:this.$tc("Date"),sortable:!0},{key:"time",label:this.$tc("time"),sortable:!0},{key:"driver_name",label:this.$tc("Driver"),sortable:!0},{key:"course_name",label:this.$tc("CourseName"),sortable:!0},{key:"course_fees",label:this.$tc("Fees"),sortable:!0},{key:"amount",label:this.$tc("Amount"),sortable:!0}]}},computed:{items:function(){return this.$store.getters.getStudentBookings},totalRows:function(){return this.items.length},isDriver:function(){return"driver"===this.$store.state.auth.user.role},amounts:function(){if(!this.totalRows)return{paid:null,unpaid:null};var e=this.items.reduce((function(e,t){return e+parseInt(t.course_fees)}),0),t=this.items.filter((function(e){return null!==e.amount})).reduce((function(e,t){return e+parseInt(t.amount)}),0);return{paid:t,unpaid:e-t}}},mounted:function(){this.$nextTick(Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isEdit){e.next=4;break}return this.student_id=this.event.extendedProps.student_id,e.next=4,this.$store.dispatch("getStudentBookings",this.student_id);case 4:case"end":return e.stop()}}),e,this)}))))},methods:{print:function(){var e=[{header:"#",dataKey:"count"},{header:this.$tc("Date"),dataKey:"date"},{header:this.$tc("time"),dataKey:"time"},{header:this.$tc("Driver"),dataKey:"driver_name"},{header:this.$tc("CourseName"),dataKey:"course_name"}],t=new Date,r=this.items.filter((function(e){return e.date>=t.toISOString().split("T")[0]})),n={body:r=this.alldata?this.items:r,columns:e,fileName:this.$tc("Student")+t.getTime(),invoice:{invDesc:"Montag - Freitag: 09.00 - 19.00 Uhr + Samstags: 10.00 - 15.00 Uhr Absage von Fahrstunden NUR persönlich oder telefonisch! Eingeplante Fahrstunden, die NICHT eingehalten werden können, müssen 2 WERKTAGE (Samstage zählen hierbei NICHT zu den Werktagen) vorher abgesagt werden. Ansonsten werden 70% der Fahrstunde angerechnet."},contact:{label:this.$tc("Student")+" : "+this.event.title}};this.jsPDFInvoiceTemplate(n)}}}),l=(r(554),r(30)),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-table",{attrs:{items:e.items,fields:e.fields,"current-page":e.currentPage,"per-page":e.perPage,hover:!0,busy:e.isBusy,"show-empty":"",stacked:"md",striped:"","tbody-tr-class":"rowclass","no-border-collapse":!0,"head-variant":"light",small:"",responsive:""},scopedSlots:e._u([{key:"table-busy",fn:function(){return[r("div",{staticClass:"text-center text-danger my-2"},[r("b-spinner",{staticClass:"align-middle"}),e._v(" "),r("strong",[e._v("Loading...")])],1)]},proxy:!0},{key:"cell(#)",fn:function(t){return[r("div",{staticClass:"td-action",staticStyle:{display:"flex"}},[e._v("\n        "+e._s(t.index+1+e.perPage*(e.currentPage-1))+"\n      ")])]}},{key:"cell(course_fees)",fn:function(t){return[r("b-badge",{staticStyle:{"font-size":"100%"},attrs:{pill:"",variant:t.item.paid?"success":"danger"}},[e._v(e._s(t.item.course_fees))])]}},{key:"cell(amount)",fn:function(t){return[r("b-badge",{staticStyle:{"font-size":"100%"},attrs:{pill:"",variant:t.item.paid?"success":"danger"}},[e._v(e._s(t.item.amount))])]}}])}),e._v(" "),r("b-card-footer",{staticClass:"pt-3 pb-1 d-flex justify-content-end"},[r("div",{staticClass:"w-100",staticStyle:{display:"-webkit-box"}},[e.isDriver?e._e():r("b-button",{staticClass:"p-1 border-0 rounded-circle",attrs:{variant:"outline-dark"},on:{click:e.print}},[r("i",{staticClass:"fas fa-print fa-2x"})]),e._v(" "),e.isDriver?e._e():r("b-form-group",{staticClass:"pr-1"},[r("label",{staticClass:"switch",staticStyle:{"vertical-align":"middle","margin-bottom":"0.3rem"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.alldata,expression:"alldata"}],attrs:{id:"togBtn",type:"checkbox"},domProps:{checked:Array.isArray(e.alldata)?e._i(e.alldata,null)>-1:e.alldata},on:{change:function(t){var r=e.alldata,n=t.target,o=!!n.checked;if(Array.isArray(r)){var l=e._i(r,null);n.checked?l<0&&(e.alldata=r.concat([null])):l>-1&&(e.alldata=r.slice(0,l).concat(r.slice(l+1)))}else e.alldata=o}}}),e._v(" "),r("div",{staticClass:"slider round"},[r("span",{staticClass:"on"},[e._v(e._s(e.$tc("All")))]),e._v(" "),r("span",{staticClass:"off"},[e._v(e._s(e.$tc("Future")))])])])]),e._v(" "),r("b-badge",{attrs:{pill:"",variant:"success"}},[r("span",{staticClass:"h4 text-light"},[e._v(e._s(e.$tc("Paid"))+" :\n          "),r("span",{staticClass:"text-success"},[e._v(e._s(e.amounts.paid))])])]),e._v(" "),r("b-badge",{attrs:{pill:"",variant:"danger"}},[r("span",{staticClass:"h4 text-light"},[e._v(e._s(e.$tc("Remainings"))+" :\n          "),r("span",{staticClass:"text-danger"},[e._v(e._s(e.amounts.unpaid))])])])],1),e._v(" "),r("b-pagination",{attrs:{"total-rows":e.totalRows,"per-page":e.perPage,"last-number":"","first-number":""},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)}),[],!1,null,"92ea7816",null);t.default=component.exports},592:function(e,t,r){"use strict";r.r(t);var n=r(20),o=(r(75),r(180),r(593)),l=r(591),c=r(587),d=r(586),f={components:{BookingForm:o.default,StudentBookings:l.default,NoteHistory:c.default,ChangeLogs:d.default},props:{event:{type:Object,default:null},isDeleted:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!0},revert:{type:Function,default:null},franchiseId:{type:Number,default:null},driverId:{type:Number,default:null}},computed:{isadmin:function(){return"admin"===this.$store.state.auth.user.role},isDriver:function(){return"driver"===this.$store.state.auth.user.role}},methods:{hideModal:function(){var e=this;this.$nextTick((function(){e.$refs.addBooking.hide()}))},deletemodel:function(){this.$root.$emit("bv::show::modal","deleteModel")},deleteBooking:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("deleteBooking",e.event.id);case 2:t.sent&&(e.hideModal(),e.$parent.getBookingList());case 4:case"end":return t.stop()}}),t)})))()},onhide:function(){this.$router.push("dashboard")}}},m=(r(597),r(30)),component=Object(m.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-modal",{ref:"addBooking",attrs:{id:"addBooking",size:"lg","hide-footer":""},on:{hide:e.onhide},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e.isEdit?r("h2",[e._v("\n      "+e._s(e.event.title)+"\n      "),e.isDriver||e.isDeleted?e._e():r("b-button",{staticClass:"p-2 border-0 rounded-circle",attrs:{variant:"outline-danger"},on:{click:e.deletemodel}},[r("i",{staticClass:"fas fa-trash-alt fa-r17x"})])],1):r("h2",[e._v(e._s(e.$tc("Add")+" "+e.$tc("Booking")))])]},proxy:!0}])},[e._v(" "),r("b-card",{staticClass:"border-0 mb-0 p-0",attrs:{type:"secondary","header-class":"ddm","no-body":""}},[!e.isDriver&&e.isEdit?r("b-card-header",{staticClass:"py-0 border-top ddm border-3",attrs:{"header-tag":"nav"}},[r("b-row",[r("b-col",[r("b-button",{staticClass:"border-0 roud",attrs:{variant:"outline-primary",to:"#",active:"#"===e.$route.hash||""===e.$route.hash,block:""}},[e._v(e._s(e.$tc("Edit")))])],1),e._v(" "),r("b-col",[r("b-button",{staticClass:"border-0 roud",attrs:{variant:"outline-primary",to:"#two",active:"#two"===e.$route.hash||"#two"===e.$route.hash,block:""}},[e._v(e._s(e.$tc("History")))])],1),e._v(" "),r("b-col",[r("b-button",{staticClass:"border-0 roud",attrs:{variant:"outline-primary",to:"#three",active:"#three"===e.$route.hash||"#three"===e.$route.hash,block:""}},[e._v(e._s(e.$tc("Note")))])],1),e._v(" "),e.isadmin?r("b-col",[r("b-button",{staticClass:"border-0 roud",attrs:{variant:"outline-primary",to:"#for",active:"#for"===e.$route.hash||"#for"===e.$route.hash,block:""}},[e._v(e._s(e.$tc("LOG")))])],1):e._e()],1)],1):e._e(),e._v(" "),r("b-card-body",{staticClass:"p-0"},[e.isDriver?r("StudentBookings",e._b({},"StudentBookings",e.$props,!1)):e._e(),e._v(" "),r("div",{staticClass:"tab-content"},[r("div",{staticClass:"px-4 pt-4",class:["tab-pane",{active:"#"===e.$route.hash||""===e.$route.hash}]},[e.isDriver?e._e():r("BookingForm",e._b({on:{exit:e.hideModal,refresh:function(t){return e.$parent.getBookingList()}}},"BookingForm",e.$props,!1))],1),e._v(" "),e.isDriver?e._e():r("div",{class:["tab-pane",{active:"#two"===e.$route.hash}]},[r("StudentBookings",e._b({},"StudentBookings",e.$props,!1))],1),e._v(" "),e.isDriver?e._e():r("div",{class:["tab-pane",{active:"#three"===e.$route.hash}]},[r("NoteHistory",e._b({},"NoteHistory",e.$props,!1))],1),e._v(" "),e.isadmin?r("div",{class:["tab-pane",{active:"#for"===e.$route.hash}]},[r("ChangeLogs",e._b({},"ChangeLogs",e.$props,!1))],1):e._e()])],1)],1),e._v(" "),r("DeleteModel",{attrs:{"execute-delelte":e.deleteBooking}})],1)}),[],!1,null,"4eed4b1f",null);t.default=component.exports;installComponents(component,{DeleteModel:r(515).default})},593:function(e,t,r){"use strict";r.r(t);var n=r(20),o=(r(75),r(180),r(27),r(76),r(58),r(31),r(97),r(59),{components:{ModelSelect:r(520).ModelSelect},props:{event:{type:Object,default:null},isEdit:{type:Boolean,default:!0},revert:{type:Function,default:null},franchiseId:{type:Number,default:null},isDeleted:{type:Boolean,default:!1},driverId:{type:Number,default:null}},data:function(){return{course:null,minis:30,calBusy:!1,loading:!1,classes_id:null,start:null,art:null,end:null,hours:Array.from({length:19}).map((function(e,i){return i+5})),form:{id:null,amount:null,student_id:null,franchise_id:null,car_id:null,date:null,start:null,end:null,note:null,paid:!1,driver_id:null,course_id:null}}},computed:{drivers:function(){return this.$store.state.drivers},franchises:function(){return this.$store.state.franchiselist},studentlist:function(){return this.$store.state.studentlist},coursesList:function(){return this.$store.state.coursesList},classes:function(){return this.$store.getters.getClassesList},carList:function(){return this.$store.state.carList}},mounted:function(){this.$nextTick(Object(n.a)(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.form.driver_id=this.driverId,this.form.franchise_id=this.franchiseId,this.form.date=this.event.startStr.slice(0,10),this.start=this.event.startStr.slice(11,16),this.end=this.endDate(),!this.isEdit){e.next=26;break}return this.calBusy=!0,this.classes_id=this.event.extendedProps.class_id,e.next=10,this.getCoursesArts();case 10:if(!(t=this.coursesList.find((function(e){return(e.value&&e.value.id)===r.event.extendedProps.course_id})))){e.next=19;break}return this.course=t.value,e.next=15,this.getCourseChange();case 15:this.form.car_id=this.event.extendedProps.car_id,this.art=this.event.extendedProps.course_art,e.next=21;break;case 19:this.form.car_id=null,this.art=null;case 21:this.form.student_id=this.event.extendedProps.student_id,this.form.paid=this.event.extendedProps.paid,this.form.amount=this.event.extendedProps.amount,this.form.id=this.event.id,this.calBusy=!1;case 26:case"end":return e.stop()}}),e,this)}))))},methods:{hideModal:function(){var e=this;this.$nextTick((function(){e.$refs.addBooking.hide()}))},onhide:function(){},getCoursesArts:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.calBusy=!0,e.course=null,e.form.car_id=null,t.next=5,e.$store.dispatch("getCoursesArtList",e.classes_id);case 5:e.calBusy=!1;case 6:case"end":return t.stop()}}),t)})))()},getCourseChange:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.calBusy=!0,e.form.car_id=null,e.minis=e.course.course_time_duration,e.art=e.course.art,e.end=e.endDate(),t.next=7,e.$store.dispatch("getCarList",{user_id:e.form.driver_id,franchise_id:e.form.franchise_id,art:e.art});case 7:e.calBusy=!1;case 8:case"end":return t.stop()}}),t)})))()},getTimeChange:function(){this.end=this.endDate()},bookSlot:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loading=!0,""===e.form.amount&&(e.form.amount=null),e.form.course_id=e.course.id,e.form.start=e.form.date+" "+e.start+":00",e.form.end=e.form.date+" "+e.end+":00",e.form.note=null!=e.form.note?e.form.note.trim():e.form.note,!e.isEdit){t.next=12;break}return t.next=9,e.$store.dispatch("updateSlot",e.form);case 9:r=t.sent,t.next=15;break;case 12:return t.next=14,e.$store.dispatch("bookSlot",e.form);case 14:r=t.sent;case 15:r&&(e.loading=!1,e.$emit("exit"),e.$emit("refresh")),e.loading=!1;case 17:case"end":return t.stop()}}),t)})))()},endDate:function(){var e=parseInt(this.start.slice(0,2))+Math.floor(this.minis/60),t=parseInt(this.start.slice(3,5))+this.minis%60;return t>60&&(e+=Math.floor(t/60),t%=60),60===t&&(e+=1,t="00"),t=1===(t+="").length?"0"+t:t,(e=1===(e+="").length?"0"+e:e)+":"+t}}}),l=(r(552),r(30)),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var n=t.invalid;return[r("b-overlay",{staticClass:"position-clock",attrs:{variant:"white",opacity:.3,blur:"1rem",rounded:"sm",show:e.calBusy}},[r("b-form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.bookSlot.apply(null,arguments)}}},[r("b-row",[r("b-col",[r("b-form-group",{staticClass:"form-control-label",attrs:{label:e.$tc("Franchise")}},[r("b-form-select",{staticClass:"form-control-alternative",attrs:{name:e.$tc("Franchise"),rules:"required",options:e.franchises,required:"",disabled:""},model:{value:e.form.franchise_id,callback:function(t){e.$set(e.form,"franchise_id",t)},expression:"form.franchise_id"}})],1)],1),e._v(" "),r("b-col",[r("b-form-group",{staticClass:"form-control-label",attrs:{label:e.$tc("Driver")}},[r("b-form-select",{staticClass:"form-control-alternative",attrs:{name:e.$tc("Driver"),options:e.drivers,disabled:""},model:{value:e.form.driver_id,callback:function(t){e.$set(e.form,"driver_id",t)},expression:"form.driver_id"}})],1)],1),e._v(" "),r("b-col",[r("ValidationProvider",{attrs:{name:"Student",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("label",{staticClass:"form-control-label"},[e._v(e._s(e.$tc("Student")))]),e._v(" "),r("model-select",{staticClass:"trito",attrs:{options:e.studentlist,name:e.$tc("Student"),placeholder:"select "+e.$tc("Student")},model:{value:e.form.student_id,callback:function(t){e.$set(e.form,"student_id",t)},expression:"form.student_id"}}),e._v(" "),r("span",{staticClass:"invalid-feedback",staticStyle:{display:"block"},attrs:{id:"error"}},[e._v(e._s(n[0]))]),e._v(" "),r("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"model",rawName:"v-model",value:e.form.student_id,expression:"form.student_id"}],attrs:{type:"text"},domProps:{value:e.form.student_id},on:{input:function(t){t.target.composing||e.$set(e.form,"student_id",t.target.value)}}})]}}],null,!0)})],1)],1),e._v(" "),r("b-row",[r("b-col",[r("b-form-group",{staticClass:"form-control-label",attrs:{label:e.$tc("ClassesName")}},[r("b-form-select",{staticClass:"form-control-alternative",attrs:{name:e.$tc("ClassesName"),rules:"required",options:e.classes,required:"",disabled:e.isEdit},on:{change:e.getCoursesArts},model:{value:e.classes_id,callback:function(t){e.classes_id=t},expression:"classes_id"}})],1)],1),e._v(" "),r("b-col",[r("b-form-group",{staticClass:"form-control-label",attrs:{label:e.$tc("CourseName")}},[r("b-form-select",{staticClass:"form-control-alternative",attrs:{name:e.$tc("CourseName"),rules:"required",options:e.coursesList,required:""},on:{change:e.getCourseChange},model:{value:e.course,callback:function(t){e.course=t},expression:"course"}})],1)],1),e._v(" "),r("b-col",[r("b-form-group",{staticClass:"form-control-label",attrs:{label:e.$tc("Car")}},[r("b-form-select",{staticClass:"form-control-alternative",attrs:{name:e.$tc("Car"),rules:"required",options:e.carList,required:""},model:{value:e.form.car_id,callback:function(t){e.$set(e.form,"car_id",t)},expression:"form.car_id"}})],1)],1)],1),e._v(" "),r("b-row",[r("b-col",[r("ValidationProvider",{attrs:{name:e.$tc("Date"),rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("label",{staticClass:"form-control-label"},[e._v(e._s(e.$tc("Date")))]),e._v(" "),r("date-picker",{staticClass:"input-group input-group-alternative",attrs:{locale:"de",clearable:!1,editable:!1,disabled:!e.isEdit,required:!0,placeholder:"Select date","value-type":"format"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}}),e._v(" "),r("span",{staticClass:"invalid-feedback",staticStyle:{display:"block"},attrs:{id:"error"}},[e._v(e._s(n[0]))]),e._v(" "),r("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"model",rawName:"v-model",value:e.form.date,expression:"form.date"}],attrs:{type:"text"},domProps:{value:e.form.date},on:{input:function(t){t.target.composing||e.$set(e.form,"date",t.target.value)}}})]}}],null,!0)})],1),e._v(" "),r("b-col",[r("ValidationProvider",{attrs:{name:"Start Time",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("label",{staticClass:"form-control-label"},[e._v(e._s(e.$tc("StartTime")))]),e._v(" "),r("date-picker",{staticClass:"input-group input-group-alternative",attrs:{locale:"de","hour-options":e.hours,format:"HH:mm","value-type":"format",type:"time",placeholder:"HH:mm",clearable:!1,editable:!1,required:!0},on:{change:e.getTimeChange},model:{value:e.start,callback:function(t){e.start=t},expression:"start"}}),e._v(" "),r("span",{staticClass:"invalid-feedback",staticStyle:{display:"block"},attrs:{id:"error"}},[e._v(e._s(n[0]))]),e._v(" "),r("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"model",rawName:"v-model",value:e.start,expression:"start"}],attrs:{type:"text"},domProps:{value:e.start},on:{input:function(t){t.target.composing||(e.start=t.target.value)}}})]}}],null,!0)})],1),e._v(" "),r("b-col",[r("ValidationProvider",{attrs:{name:"End Time",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("label",{staticClass:"form-control-label"},[e._v(e._s(e.$tc("EndTime")))]),e._v(" "),r("date-picker",{staticClass:"input-group input-group-alternative",attrs:{locale:"de",clearable:!1,editable:!1,required:!0,"hour-options":e.hours,format:"HH:mm","value-type":"format",type:"time",disabled:"",placeholder:"HH:mm"},model:{value:e.end,callback:function(t){e.end=t},expression:"end"}}),e._v(" "),r("span",{staticClass:"invalid-feedback",staticStyle:{display:"block"},attrs:{id:"error"}},[e._v(e._s(n[0]))]),e._v(" "),r("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"model",rawName:"v-model",value:e.end,expression:"end"}],attrs:{type:"text"},domProps:{value:e.end},on:{input:function(t){t.target.composing||(e.end=t.target.value)}}})]}}],null,!0)})],1)],1),e._v(" "),r("b-row",{staticClass:"pt-3"},[r("b-col",[r("base-input",{attrs:{alternative:"",name:e.$tc("Duration"),label:e.$tc("Duration"),placeholder:e.$tc("Duration"),"prepend-icon":"fas fa-angle-right fa-lg",disabled:""},model:{value:e.minis,callback:function(t){e.minis=t},expression:"minis"}})],1),e._v(" "),r("b-col",[r("base-input",{attrs:{alternative:"",name:e.$tc("Amount"),type:"number",rules:"integer|min_value:1",label:e.$tc("Amount"),placeholder:e.$tc("Amount"),"prepend-icon":"fas fa-angle-right fa-lg"},model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}})],1),e._v(" "),r("b-col",[r("b-form-group",{staticStyle:{"margin-top":"2.2rem"}},[r("label",{staticClass:"pl-0 mr-2 form-control-label text-right"},[e._v(e._s(e.$tc("Paid")))]),e._v(" "),r("label",{staticClass:"switch",staticStyle:{"vertical-align":"middle","margin-bottom":"0.3rem"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.paid,expression:"form.paid"}],attrs:{id:"togBtn",type:"checkbox"},domProps:{checked:Array.isArray(e.form.paid)?e._i(e.form.paid,null)>-1:e.form.paid},on:{change:function(t){var r=e.form.paid,n=t.target,o=!!n.checked;if(Array.isArray(r)){var l=e._i(r,null);n.checked?l<0&&e.$set(e.form,"paid",r.concat([null])):l>-1&&e.$set(e.form,"paid",r.slice(0,l).concat(r.slice(l+1)))}else e.$set(e.form,"paid",o)}}}),e._v(" "),r("div",{staticClass:"slider round"},[r("span",{staticClass:"on"},[e._v(e._s(e.$tc("Yes")))]),e._v(" "),r("span",{staticClass:"off"},[e._v(e._s(e.$tc("No")))])])])])],1)],1),e._v(" "),r("b-row",[r("b-col",[r("base-input",{attrs:{alternative:"",name:e.$tc("Note"),label:e.$tc("Note"),placeholder:e.$tc("Note"),"prepend-icon":"fas fa-angle-right fa-lg"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1),e._v(" "),r("div",{staticClass:"modal-footer"},[e.isDeleted?e._e():r("b-button",{attrs:{type:"submit",disabled:n||e.loading,variant:"primary"}},[e.loading?r("b-spinner",{staticClass:"mx-2",attrs:{small:""}}):e._e(),e.loading?e._e():r("span",[e._v(e._s(e.isEdit?e.$tc("save"):e.$tc("submit")))])],1)],1)],1)],1)]}}])})}),[],!1,null,null,null);t.default=component.exports},597:function(e,t,r){"use strict";r(574)},598:function(e,t,r){var n=r(71)(!1);n.push([e.i,".ddm[data-v-4eed4b1f]{display:block!important;background-color:#d9d9d9}.roud[data-v-4eed4b1f]{border-radius:1.375rem!important}",""]),e.exports=n}}]);