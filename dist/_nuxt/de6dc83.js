(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{522:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n(13),n(12),n(9),n(14),n(10),n(15);var r=n(3),o=(n(27),n(35),n(517));n(518);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var d={methods:{jsPDFInvoiceTemplate:function(e){var t,n,r,l,d,v,h,f,m,y,_,w,param={body:e.body,columns:e.columns,fileName:e.fileName||"file",orientationLandscape:e.orientationLandscape||!1,business:{address:(null===(t=e.business)||void 0===t?void 0:t.address)||"Filiale 1 - Schwedenstraße 18 , 13357 Berlin",phone:(null===(n=e.business)||void 0===n?void 0:n.phone)||"Filiale 2 - Scharnweberstraße 60, 13405 Berlin",email:(null===(r=e.business)||void 0===r?void 0:r.email)||"Filiale 3 - Scharnweberstraße 25, 13405 Berlin",website:(null===(l=e.business)||void 0===l?void 0:l.website)||" "},contact:{label:(null===(d=e.contact)||void 0===d?void 0:d.label)||""},invoice:{label:(null===(v=e.invoice)||void 0===v?void 0:v.label)||"",invDate:(null===(h=e.invoice)||void 0===h?void 0:h.invDate)||"",invTotal:(null===(f=e.invoice)||void 0===f?void 0:f.invTotal)||"",invDescLabel:(null===(m=e.invoice)||void 0===m?void 0:m.invDescLabel)||"Bürozeiten",invDesc:(null===(y=e.invoice)||void 0===y?void 0:y.invDesc)||"Montag - Freitag: 09.00 - 19.00 Uhr + Samstags: 10.00 - 15.00 Uhr Absage von Fahrstunden NUR persönlich oder telefonisch! Eingeplante Fahrstunden, die NICHT eingehalten werden können, müssen 2 WERKTAGE (Samstage zählen hierbei NICHT zu den Werktagen) vorher abgesagt werden.",row1:(null===(_=e.invoice)||void 0===_?void 0:_.row1)||"",row2:(null===(w=e.invoice)||void 0===w?void 0:w.row2)||""},pageEnable:e.pageEnable||!0,pageLabel:e.pageLabel||"Page"},x={orientation:param.orientationLandscape?"landscape":""},S=new o.default(x),k=new Image;k.src="logo.png";var C=S.internal.pageSize.width,P="#000000",T="#4d4e53",D=20,F=12,O=10,z=6,$=4,j="{total_pages_count_string}",N=0,E=param.body.map((function(e){return c(c({},e),{},{count:++N})}));S.autoTable({margin:{top:55},body:E,headStyles:{fillColor:[41,128,186]},columns:param.columns,theme:"grid",didDrawPage:function(data){var e=15;S.addImage(k,16,9,50,18),param.business.name&&(S.setFontSize(D),S.setTextColor(P),S.text(C-10,e,param.business.name,"right"),e+=$,e+=$),S.setFontSize(O-1),S.setTextColor(T),S.text(C-10,e,param.business.address,"right"),e+=$,S.text(C-10,e,param.business.phone,"right"),S.setFontSize(O),e+=$,S.text(C-10,e,param.business.email,"right"),e+=$,S.text(C-10,e,param.business.website,"right"),e+=$,e+=$,S.line(10,e,C-10,e),e+=z,e+=z,S.setTextColor(T),S.setFontSize(O),S.text(10,e,param.contact.label),S.setTextColor(T),S.setFontSize(O),S.text(C-10,e,param.invoice.invDate,"right"),e+=$;var t="Page "+S.internal.getNumberOfPages();"function"==typeof S.putTotalPages&&(t=t+" of "+j),S.setFontSize(10);var n=S.internal.pageSize,r=n.height?n.height:n.getHeight();S.text(t,data.settings.margin.left,r-10);var o=(new Date).toLocaleString();S.text(C-14,r-10,o,"right")}});var A=S.lastAutoTable.finalY+10;param.invoice.invTotal&&(S.setFontSize(11),S.text(C-14,A,param.invoice.invTotal,"right")),param.invoice.row1&&(A+=z,S.text(C-14,A,param.invoice.row1,"right")),param.invoice.row2&&(A+=z,S.text(C-14,A,param.invoice.row2,"right")),S.setTextColor(P),A+=$,A+=$,S.setFontSize(F);!function(){A+=$,A+=$,S.setFontSize(F),S.setTextColor(P),S.text(param.invoice.invDescLabel,10,A),A+=$,A+=$,S.setTextColor(T),S.setFontSize(O-1);var e=S.splitTextToSize(param.invoice.invDesc,C-23,{});S.text(e,10,A)}(),"function"==typeof S.putTotalPages&&S.putTotalPages(j),S.save(e.fileName+".pdf")}}}},529:function(e,t,n){var content=n(555);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(72).default)("2ca02e76",content,!0,{sourceMap:!1})},554:function(e,t,n){"use strict";n(529)},555:function(e,t,n){var r=n(71)(!1);r.push([e.i,".borderbottom[data-v-92ea7816]{border-bottom:4px solid #e9ecef!important}.fa-r17x[data-v-92ea7816]{font-size:1.5em}.off[data-v-92ea7816]{left:65%}",""]),e.exports=r},591:function(e,t,n){"use strict";n.r(t);var r=n(20),o=(n(75),n(9),n(25),n(41),n(518),{mixins:[n(522).a],props:{event:{type:Object,default:null},isEdit:{type:Boolean,default:!0}},data:function(){return{student_id:null,currentPage:1,perPage:10,filter:null,alldata:!0,franchise_id:null,isBusy:!1,fields:[{key:"#"},{key:"date",label:this.$tc("Date"),sortable:!0},{key:"time",label:this.$tc("time"),sortable:!0},{key:"driver_name",label:this.$tc("Driver"),sortable:!0},{key:"course_name",label:this.$tc("CourseName"),sortable:!0},{key:"course_fees",label:this.$tc("Fees"),sortable:!0},{key:"amount",label:this.$tc("Amount"),sortable:!0}]}},computed:{items:function(){return this.$store.getters.getStudentBookings},totalRows:function(){return this.items.length},isDriver:function(){return"driver"===this.$store.state.auth.user.role},amounts:function(){if(!this.totalRows)return{paid:null,unpaid:null};var e=this.items.reduce((function(e,t){return e+parseInt(t.course_fees)}),0),t=this.items.filter((function(e){return null!==e.amount})).reduce((function(e,t){return e+parseInt(t.amount)}),0);return{paid:t,unpaid:e-t}}},mounted:function(){this.$nextTick(Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isEdit){e.next=4;break}return this.student_id=this.event.extendedProps.student_id,e.next=4,this.$store.dispatch("getStudentBookings",this.student_id);case 4:case"end":return e.stop()}}),e,this)}))))},methods:{print:function(){var e=[{header:"#",dataKey:"count"},{header:this.$tc("Date"),dataKey:"date"},{header:this.$tc("time"),dataKey:"time"},{header:this.$tc("Driver"),dataKey:"driver_name"},{header:this.$tc("CourseName"),dataKey:"course_name"}],t=new Date,n=this.items.filter((function(e){return e.date>=t.toISOString().split("T")[0]})),r={body:n=this.alldata?this.items:n,columns:e,fileName:this.$tc("Student")+t.getTime(),invoice:{invDesc:"Montag - Freitag: 09.00 - 19.00 Uhr + Samstags: 10.00 - 15.00 Uhr Absage von Fahrstunden NUR persönlich oder telefonisch! Eingeplante Fahrstunden, die NICHT eingehalten werden können, müssen 2 WERKTAGE (Samstage zählen hierbei NICHT zu den Werktagen) vorher abgesagt werden. Ansonsten werden 70% der Fahrstunde angerechnet."},contact:{label:this.$tc("Student")+" : "+this.event.title}};this.jsPDFInvoiceTemplate(r)}}}),l=(n(554),n(30)),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-table",{attrs:{items:e.items,fields:e.fields,"current-page":e.currentPage,"per-page":e.perPage,hover:!0,busy:e.isBusy,"show-empty":"",stacked:"md",striped:"","tbody-tr-class":"rowclass","no-border-collapse":!0,"head-variant":"light",small:"",responsive:""},scopedSlots:e._u([{key:"table-busy",fn:function(){return[n("div",{staticClass:"text-center text-danger my-2"},[n("b-spinner",{staticClass:"align-middle"}),e._v(" "),n("strong",[e._v("Loading...")])],1)]},proxy:!0},{key:"cell(#)",fn:function(t){return[n("div",{staticClass:"td-action",staticStyle:{display:"flex"}},[e._v("\n        "+e._s(t.index+1+e.perPage*(e.currentPage-1))+"\n      ")])]}},{key:"cell(course_fees)",fn:function(t){return[n("b-badge",{staticStyle:{"font-size":"100%"},attrs:{pill:"",variant:t.item.paid?"success":"danger"}},[e._v(e._s(t.item.course_fees))])]}},{key:"cell(amount)",fn:function(t){return[n("b-badge",{staticStyle:{"font-size":"100%"},attrs:{pill:"",variant:t.item.paid?"success":"danger"}},[e._v(e._s(t.item.amount))])]}}])}),e._v(" "),n("b-card-footer",{staticClass:"pt-3 pb-1 d-flex justify-content-end"},[n("div",{staticClass:"w-100",staticStyle:{display:"-webkit-box"}},[e.isDriver?e._e():n("b-button",{staticClass:"p-1 border-0 rounded-circle",attrs:{variant:"outline-dark"},on:{click:e.print}},[n("i",{staticClass:"fas fa-print fa-2x"})]),e._v(" "),e.isDriver?e._e():n("b-form-group",{staticClass:"pr-1"},[n("label",{staticClass:"switch",staticStyle:{"vertical-align":"middle","margin-bottom":"0.3rem"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.alldata,expression:"alldata"}],attrs:{id:"togBtn",type:"checkbox"},domProps:{checked:Array.isArray(e.alldata)?e._i(e.alldata,null)>-1:e.alldata},on:{change:function(t){var n=e.alldata,r=t.target,o=!!r.checked;if(Array.isArray(n)){var l=e._i(n,null);r.checked?l<0&&(e.alldata=n.concat([null])):l>-1&&(e.alldata=n.slice(0,l).concat(n.slice(l+1)))}else e.alldata=o}}}),e._v(" "),n("div",{staticClass:"slider round"},[n("span",{staticClass:"on"},[e._v(e._s(e.$tc("All")))]),e._v(" "),n("span",{staticClass:"off"},[e._v(e._s(e.$tc("Future")))])])])]),e._v(" "),n("b-badge",{attrs:{pill:"",variant:"success"}},[n("span",{staticClass:"h4 text-light"},[e._v(e._s(e.$tc("Paid"))+" :\n          "),n("span",{staticClass:"text-success"},[e._v(e._s(e.amounts.paid))])])]),e._v(" "),n("b-badge",{attrs:{pill:"",variant:"danger"}},[n("span",{staticClass:"h4 text-light"},[e._v(e._s(e.$tc("Remainings"))+" :\n          "),n("span",{staticClass:"text-danger"},[e._v(e._s(e.amounts.unpaid))])])])],1),e._v(" "),n("b-pagination",{attrs:{"total-rows":e.totalRows,"per-page":e.perPage,"last-number":"","first-number":""},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)}),[],!1,null,"92ea7816",null);t.default=component.exports}}]);