(window.webpackJsonp=window.webpackJsonp||[]).push([[52,7],{522:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n(13),n(12),n(9),n(14),n(10),n(15);var r=n(3),o=(n(27),n(35),n(517));n(518);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var d={methods:{jsPDFInvoiceTemplate:function(e){var t,n,r,l,d,h,m,v,f,_,y,x,param={body:e.body,columns:e.columns,fileName:e.fileName||"file",orientationLandscape:e.orientationLandscape||!1,business:{address:(null===(t=e.business)||void 0===t?void 0:t.address)||"Filiale 1 - Schwedenstraße 18 , 13357 Berlin",phone:(null===(n=e.business)||void 0===n?void 0:n.phone)||"Filiale 2 - Scharnweberstraße 60, 13405 Berlin",email:(null===(r=e.business)||void 0===r?void 0:r.email)||"Filiale 3 - Scharnweberstraße 25, 13405 Berlin",website:(null===(l=e.business)||void 0===l?void 0:l.website)||" "},contact:{label:(null===(d=e.contact)||void 0===d?void 0:d.label)||""},invoice:{label:(null===(h=e.invoice)||void 0===h?void 0:h.label)||"",invDate:(null===(m=e.invoice)||void 0===m?void 0:m.invDate)||"",invTotal:(null===(v=e.invoice)||void 0===v?void 0:v.invTotal)||"",invDescLabel:(null===(f=e.invoice)||void 0===f?void 0:f.invDescLabel)||"Bürozeiten",invDesc:(null===(_=e.invoice)||void 0===_?void 0:_.invDesc)||"Montag - Freitag: 09.00 - 19.00 Uhr + Samstags: 10.00 - 15.00 Uhr Absage von Fahrstunden NUR persönlich oder telefonisch! Eingeplante Fahrstunden, die NICHT eingehalten werden können, müssen 2 WERKTAGE (Samstage zählen hierbei NICHT zu den Werktagen) vorher abgesagt werden.",row1:(null===(y=e.invoice)||void 0===y?void 0:y.row1)||"",row2:(null===(x=e.invoice)||void 0===x?void 0:x.row2)||""},pageEnable:e.pageEnable||!0,pageLabel:e.pageLabel||"Page"},w={orientation:param.orientationLandscape?"landscape":""},C=new o.default(w),$=new Image;$.src="logo.png";var k=C.internal.pageSize.width,P="#000000",S="#4d4e53",O=20,T=12,D=10,F=6,N=4,j="{total_pages_count_string}",z=0,A=param.body.map((function(e){return c(c({},e),{},{count:++z})}));C.autoTable({margin:{top:55},body:A,headStyles:{fillColor:[41,128,186]},columns:param.columns,theme:"grid",didDrawPage:function(data){var e=15;C.addImage($,16,9,50,18),param.business.name&&(C.setFontSize(O),C.setTextColor(P),C.text(k-10,e,param.business.name,"right"),e+=N,e+=N),C.setFontSize(D-1),C.setTextColor(S),C.text(k-10,e,param.business.address,"right"),e+=N,C.text(k-10,e,param.business.phone,"right"),C.setFontSize(D),e+=N,C.text(k-10,e,param.business.email,"right"),e+=N,C.text(k-10,e,param.business.website,"right"),e+=N,e+=N,C.line(10,e,k-10,e),e+=F,e+=F,C.setTextColor(S),C.setFontSize(D),C.text(10,e,param.contact.label),C.setTextColor(S),C.setFontSize(D),C.text(k-10,e,param.invoice.invDate,"right"),e+=N;var t="Page "+C.internal.getNumberOfPages();"function"==typeof C.putTotalPages&&(t=t+" of "+j),C.setFontSize(10);var n=C.internal.pageSize,r=n.height?n.height:n.getHeight();C.text(t,data.settings.margin.left,r-10);var o=(new Date).toLocaleString();C.text(k-14,r-10,o,"right")}});var L=C.lastAutoTable.finalY+10;param.invoice.invTotal&&(C.setFontSize(11),C.text(k-14,L,param.invoice.invTotal,"right")),param.invoice.row1&&(L+=F,C.text(k-14,L,param.invoice.row1,"right")),param.invoice.row2&&(L+=F,C.text(k-14,L,param.invoice.row2,"right")),C.setTextColor(P),L+=N,L+=N,C.setFontSize(T);!function(){L+=N,L+=N,C.setFontSize(T),C.setTextColor(P),C.text(param.invoice.invDescLabel,10,L),L+=N,L+=N,C.setTextColor(S),C.setFontSize(D-1);var e=C.splitTextToSize(param.invoice.invDesc,k-23,{});C.text(e,10,L)}(),"function"==typeof C.putTotalPages&&C.putTotalPages(j),C.save(e.fileName+".pdf")}}}},527:function(e,t,n){var content=n(551);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(72).default)("be80fb8e",content,!0,{sourceMap:!1})},549:function(e,t,n){"use strict";n(24)({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},550:function(e,t,n){"use strict";n(527)},551:function(e,t,n){var r=n(71)(!1);r.push([e.i,".fa-r17x[data-v-5a141e4e]{font-size:1.7em}",""]),e.exports=r},588:function(e,t,n){"use strict";n.r(t);var r=n(20),o=(n(75),n(31),n(549),n(35),n(518),{mixins:[n(522).a],data:function(){return{currentPage:1,perPage:10,date:[(new Date).toJSON().slice(0,10),(new Date).toJSON().slice(0,10)],role:null,franchise_id:null,user_id:null,pageOptions:[5,10,20,50],isBusy:!1}},computed:{userlist:function(){return this.$store.state.userlist},fields:function(){var e=[{key:"#"},{key:"paid_at",label:this.$tc("Date"),sortable:!0},{key:"time",label:this.$tc("time"),sortable:!0},{key:"student_name",label:this.$tc("StuddentName"),sortable:!0},{key:"course_name",label:this.$tc("CourseName"),sortable:!0},{key:"course_fees",label:this.$tc("Fees"),sortable:!0},{key:"amount",label:this.$tc("Amount"),sortable:!0}];return"driver"===this.role&&(e=[{key:"#"},{key:"student_name",label:this.$tc("StuddentName"),sortable:!0},{key:"course_name",label:this.$tc("CourseName"),sortable:!0},{key:"number_plate",label:this.$tc("NumberPlate"),sortable:!0},{key:"course_time_duration",label:this.$tc("CourseTimeDuration"),sortable:!0}]),e},roles:function(){return this.$store.state.roles},franchises:function(){return this.$store.state.franchiselist},items:function(){return this.$store.getters.getAccounts},isadmin:function(){return"admin"===this.$store.state.auth.user.role},totalRows:function(){return this.items.length}},mounted:function(){this.$nextTick(Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isadmin){e.next=7;break}return this.user_id=this.$store.state.auth.user.id,this.role=this.$store.state.auth.user.role,e.next=5,this.getAccounts();case 5:e.next=9;break;case 7:return e.next=9,this.$store.dispatch("getAllFranchise");case 9:case"end":return e.stop()}}),e,this)}))))},methods:{getAccounts:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isBusy=!0,null==e.date||null==e.user_id||null==e.role){t.next=6;break}return t.next=4,e.$store.dispatch("getAccounts",{dates:e.date,user_id:e.user_id,role:e.role});case 4:t.next=8;break;case 6:return t.next=8,e.$store.commit("setAccounts",null);case 8:e.isBusy=!1;case 9:case"end":return t.stop()}}),t)})))()},print:function(){var e,t,n,r;if(this.isadmin){var o=document.getElementById("selectuser");r=o.options[o.selectedIndex].text}else r=this.$store.state.auth.user.name;if("driver"===this.role){n=this.items.reduce((function(e,t){return e+parseInt(t.course_time_duration)}),0);var l=Math.floor(n/60),c=n%60;t="Total : "+(0!==l?l+" Stunden ":"")+(0!==c?c+" Minuten ":""),e=[{header:"#",dataKey:"count"},{header:this.$tc("StuddentName"),dataKey:"student_name"},{header:this.$tc("CourseName"),dataKey:"course_name"},{header:this.$tc("NumberPlate"),dataKey:"course_fees"},{header:this.$tc("CourseTimeDuration"),dataKey:"course_time_duration"}]}else t="Total : "+(t=this.items.reduce((function(e,t){return e+parseInt(t.amount)}),0))+" € ",e=[{header:"#",dataKey:"count"},{header:this.$tc("Date"),dataKey:"paid_at"},{header:this.$tc("time"),dataKey:"time"},{header:this.$tc("StuddentName"),dataKey:"student_name"},{header:this.$tc("CourseName"),dataKey:"course_name"},{header:this.$tc("Fees"),dataKey:"course_fees"},{header:this.$tc("Amount"),dataKey:"amount"}];var d={body:this.items,columns:e,fileName:"Invoice 2021",contact:{label:" User: "+r},invoice:{invDate:"Date: "+(this.date[0]!==this.date[1]?this.date:this.date[0]),invTotal:t,row2:n?"( "+n+" Minuten )":""}};this.jsPDFInvoiceTemplate(d)},getUserList:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.user_id=null,e.$store.commit("setAccounts",null),null==e.franchise_id||null==e.role){t.next=5;break}return t.next=5,e.$store.dispatch("getUserListRole",{role:e.role,franchise_id:e.franchise_id});case 5:case"end":return t.stop()}}),t)})))()}}}),l=(n(550),n(30)),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{attrs:{"no-body":""}},[n("b-card-header",{staticClass:"border-0 bg-secondary"},[n("b-row",[n("b-col",[n("h1",{staticClass:"mb-0"},[e._v(e._s(e.$tc("Accounts")))])]),e._v(" "),n("b-col",{attrs:{sm:"3"}},[n("date-picker",{staticClass:"input-group input-group-alternative",attrs:{locale:"de",clearable:!1,editable:!1,required:!0,placeholder:"Select date","value-type":"format",range:""},on:{change:e.getAccounts},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1)],1),e._v(" "),n("b-form",{staticClass:"form-horizontal"},[n("b-row",{staticClass:"pt-3 m-0",attrs:{"align-h":"between"}},[n("b-col",{staticClass:"pl-5"},[e.isadmin?n("b-form-group",[n("label",{staticClass:"col-5 pl-0 form-control-label text-right"},[e._v(e._s(e.$tc("Franchise")))]),e._v(" "),n("b-form-select",{staticClass:"col-6",attrs:{name:e.$tc("Franchise"),options:e.franchises},on:{change:e.getUserList},model:{value:e.franchise_id,callback:function(t){e.franchise_id=t},expression:"franchise_id"}})],1):e._e()],1),e._v(" "),e.isadmin?n("b-col",{staticClass:"pr-3"},[n("b-form-group",[n("label",{staticClass:"col-4 pl-0 form-control-label text-right"},[e._v(e._s(e.$tc("role")))]),e._v(" "),n("b-form-select",{staticClass:"col-7",attrs:{name:"Role",options:e.roles},on:{change:e.getUserList},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}})],1)],1):e._e(),e._v(" "),n("b-col",{staticClass:"pr-3"},[e.isadmin?n("b-form-group",[n("label",{staticClass:"col-4 pl-0 form-control-label text-right"},[e._v(e._s(e.$tc("Users")))]),e._v(" "),n("b-form-select",{staticClass:"col-7",attrs:{id:"selectuser",name:"User",options:e.userlist},on:{change:e.getAccounts},model:{value:e.user_id,callback:function(t){e.user_id=t},expression:"user_id"}})],1):e._e()],1),e._v(" "),n("b-col",{staticClass:"pr-5",attrs:{sm:"3"}},[n("b-form-group",[n("label",{staticClass:"col-7 form-control-label text-right"},[e._v(e._s(e.$tc("PerPage")))]),e._v(" "),n("b-form-select",{staticClass:"col-4",attrs:{name:e.$tc("PerPage"),options:e.pageOptions},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1)],1)],1)],1),e._v(" "),n("b-table",{attrs:{id:"accounts",items:e.items,fields:e.fields,"current-page":e.currentPage,"per-page":e.perPage,hover:!0,"show-empty":"",striped:"",busy:e.isBusy,"no-border-collapse":!0,"tbody-tr-class":"rowclass","head-variant":"light",responsive:""},scopedSlots:e._u([{key:"table-busy",fn:function(){return[n("div",{staticClass:"text-center text-danger my-2"},[n("b-spinner",{staticClass:"align-middle"}),e._v(" "),n("strong",[e._v("Loading...")])],1)]},proxy:!0},{key:"cell(#)",fn:function(t){return[n("div",{staticClass:"td-action",staticStyle:{display:"flex"}},[e._v("\n        "+e._s(t.index+1+e.perPage*(e.currentPage-1))+"\n      ")])]}}])}),e._v(" "),n("b-card-footer",{staticClass:"pt-3 pb-1 d-flex justify-content-end"},[n("div",{staticClass:"w-100"},[n("b-button",{staticClass:"p-2 border-0 rounded-circle",attrs:{variant:"outline-dark"},on:{click:e.print}},[n("i",{staticClass:"fas fa-print fa-r17x"})])],1),e._v(" "),n("b-pagination",{staticClass:"float-right",attrs:{"total-rows":e.totalRows,"per-page":e.perPage,"last-number":"","first-number":""},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)}),[],!1,null,"5a141e4e",null);t.default=component.exports},626:function(e,t,n){"use strict";n.r(t);var r={components:{Acoount:n(588).default},layout:"DashboardLayout",middleware:"authenticated"},o=n(30),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("base-header",{staticClass:"pb-6 pt-3 bgs-red pt-lg-7 d-flex align-items-center"},[n("div",{staticClass:"row align-items-center"},[n("div",{staticClass:"col-lg-6 col-7"},[n("h6",{staticClass:"h2 text-white d-inline-block mb-0"})])])]),e._v(" "),n("b-container",{staticClass:"mt--6",attrs:{fluid:""}},[n("b-row",[n("b-col",[n("Acoount")],1)],1),e._v(" "),n("div",{staticClass:"mt-5"})],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);